{"ts":1369817983268,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\n/**\n * Module dependencies.\n */\n\nvar express = require('express')\n  , routes = require('./routes');\n\nvar app = module.exports = express.createServer();\n\n// Configuration\n\napp.configure(function(){\n  app.set('views', __dirname + '/views');\n  app.set('view engine', 'jade');\n  app.use(express.bodyParser());\n  app.use(express.methodOverride());\n  app.use(app.router);\n  app.use(express.static(__dirname + '/public'));\n});\n\napp.configure('development', function(){\n  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));\n});\n\napp.configure('production', function(){\n  app.use(express.errorHandler());\n});\n\n// Routes\n\napp.get('/', routes.index);\n\napp.listen(3000);\nconsole.log(\"Express server listening on port %d in %s mode\", app.address().port, app.settings.env);\n"]],"start1":0,"start2":0,"length1":0,"length2":783}]],"length":783}
{"contributors":[],"silentsave":false,"ts":1369818513507,"patch":[[{"diffs":[[0,"e\", "],[-1,"app.address().port"],[1,"process.env.PORT"],[0,", ap"]],"start1":740,"start2":740,"length1":26,"length2":24}]],"length":781,"saved":false}
{"ts":1369818737806,"patch":[[{"diffs":[[0,"ten("],[-1,"3000"],[1,"process.env.PORT"],[0,");\nc"]],"start1":671,"start2":671,"length1":12,"length2":24}]],"length":793,"saved":false}
{"contributors":[],"silentsave":false,"ts":1369819751530,"patch":[[{"diffs":[[0,"routes')"],[1,"\n  , user = require('./routes/user')\n  , http = require('http')\n  , path = require('path')\n  , reader = require('./routes/reader')\n  , socketio = require('socket.io')\n  , events = require('./modules/events')"],[0,";\n\nvar a"]],"start1":91,"start2":91,"length1":16,"length2":223}]],"length":1000,"saved":false}
{"ts":1369819793134,"patch":[[{"diffs":[[0,".index);"],[1,"\napp.get('/users', user.list);\napp.get('/reader', reader.index);\napp.get('/reader/:name', reader.callApi);\napp.get('/sandbox', reader.sandbox);"],[0,"\n\napp.li"]],"start1":861,"start2":861,"length1":16,"length2":159}]],"length":1143,"saved":false}
{"ts":1369819854721,"patch":[[{"diffs":[[0,"function(){\n"],[1,"  app.set('port', process.env.PORT);\n"],[0,"  app.set('v"]],"start1":393,"start2":393,"length1":24,"length2":61},{"diffs":[[0," '/views');\n"],[-1,""],[0,"  app.set('v"]],"start1":472,"start2":472,"length1":24,"length2":24},{"diffs":[[0,".sandbox);\n\n"],[1,"// "],[0,"app.listen(p"]],"start1":1039,"start2":1039,"length1":24,"length2":27},{"diffs":[[0,".PORT);\n"],[1,"// "],[0,"console."]],"start1":1076,"start2":1076,"length1":16,"length2":19},{"diffs":[[0,"s.env);\n"],[1,"\nvar s = socketio.listen(app.listen(app.get('port')), function(){\n    console.log(\"Express server listening on port \" + app.get('port') + \" with socket.io\");\n});\n\ns.sockets.on('connection', function(socket){\n    \n    socket.on('ping server', function(){\n        console.log('Call ping server');\n        socket.emit('ping server done', {result: 'success'});\n    });\n    \n    socket.on('error', function(){\n        console.error('error error error');\n    });\n    \n    socket.on('load feeds', function(){\n        console.log('Call load feeds');\n        events.loadFeeds(function(feeds){\n           socket.emit('load feeds done', {feeds: feeds}); \n        });\n    });\n    \n    socket.on('load tags', function(){\n        console.log('Call load tags');\n        events.loadTags(function(tags){\n            socket.emit('load tags done', {tags: tags});\n        });\n    });\n    \n    socket.on('load feed articles', function(data){\n        console.log('Call load feed articles. feedId:%s', data.feed._id);\n        events.loadFeedArticles(data.feed._id, function(articles){\n            socket.emit('load feed articles done', {feed: data.feed, articles: articles});\n        });\n    });\n    \n    socket.on('add tag', function(tag){\n        console.log('Call add tag. tagname:%s', tag.name);\n        events.addTag(tag.name, function(tag){\n            socket.emit('add tag done', {tag: tag});\n        });\n    });\n    \n    socket.on('add feed', function(data){\n        console.log('Call add feed. url:%s', data.url);\n        events.addFeed(data.url, function(feed){\n            socket.emit('add feed done', {feed: feed});\n        });\n    });\n    \n    socket.on('refresh feed articles', function(data){\n        console.log('Call refresh feed articles.');\n        events.fetchArticles(data.feed._id, function(articles){\n            socket.emit('refresh feed articles done', {feed: data.feed, articles: articles});\n        });\n    });\n    \n    socket.on('update feed tags', function(data){\n        console.log('Call update feed tags');\n        events.updateFeedTags(data.feedId, data.feedTags, function(){\n            socket.emit('update feed tags done');\n        });\n    });\n    \n    socket.on('load feed tags', function(data){\n        console.log('Call load feed tags');\n        events.loadFeedTags(data.feedId, function(feed){\n            socket.emit('load feed tags done', {feedTags: feed.feedTags});\n        });\n    });\n    \n    socket.on('load tagged articles', function(data){\n        console.log('Call load tagged articles');\n        events.loadTaggedArticles(data.tag._id, function(articles){\n            socket.emit('load tagged articles done', {tag: data.tag, articles: articles});\n        });\n    });\n\n    socket.on('refresh tagged articles', function(data){\n        console.log('Call refresh tagged articles.');\n        events.fetchTaggedArticles(data.tag._id, function(articles){\n            socket.emit('refresh tagged articles done', {tag: data.tag, articles: articles});\n        });\n    });\n});\n"]],"start1":1178,"start2":1178,"length1":8,"length2":3000}]],"length":4178,"saved":false}
{"contributors":[],"silentsave":false,"ts":1369895685085,"patch":[[{"diffs":[[0,"ress"],[-1,".createServer"],[0,"();\n"]],"start1":339,"start2":339,"length1":21,"length2":8}]],"length":4165,"saved":false}
{"ts":1369895718336,"patch":[[{"diffs":[[0,"/events');\n\n"],[1,"//"],[0,"var app = mo"]],"start1":297,"start2":297,"length1":24,"length2":26},{"diffs":[[0,"xports ="],[1," express.createServer();\nvar app ="],[0," express"]],"start1":329,"start2":329,"length1":16,"length2":50}]],"length":4201,"saved":false}
{"ts":1369895738577,"patch":[[{"diffs":[[0,"nts');\n\n"],[-1,"//"],[0,"var app "]],"start1":301,"start2":301,"length1":18,"length2":16},{"diffs":[[0,"r();"],[-1,"\nvar app = express();"],[0,"\n\n//"]],"start1":355,"start2":355,"length1":29,"length2":8}]],"length":4178,"saved":false}
