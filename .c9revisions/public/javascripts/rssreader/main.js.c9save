{"ts":1369894932815,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1369894846692,"patch":[[{"diffs":[[1,"enyo.kind({\r\n    name: \"reader.fragment.MainPanel\",\r\n    kind: \"FittableRows\",\r\n    classes: \"panel-main\",\r\n    components: [\r\n        {\r\n            kind: \"Panels\",\r\n            name: \"articlePanel\",\r\n            classes: \"panels article-panel\",\r\n            arrangerKind: \"CardSlideInArranger\",\r\n            fit: true,\r\n            components: [\r\n                {kind: \"Scroller\", strategyKind: \"TouchScrollStrategy\", components:[\r\n                    {name: \"articles\", kind: \"reader.fragment.Articles\"},\r\n                ]},\r\n                {kind: \"Scroller\", strategyKind: \"TouchScrollStrategy\", components:[\r\n                    {name: \"feedTags\", kind: \"reader.fragment.FeedTags\", onUpdateSelectedItem: \"updateSelectedTag\", onResetFeedTagData: \"refreshFeedData\"}\r\n                ]}\r\n            ]\r\n        },\r\n        {kind: \"reader.fragment.ArticleToolbar\", name: \"articleBar\", onShowTagPanel: \"showTagPanel\"},\r\n    ],\r\n    feed: null,\r\n    feedtag: null,\r\n    showTagPanel: function(){\r\n        if(this.$.articlePanel.index === 0){\r\n            this.$.articlePanel.next();\r\n            this.refreshFeedTags();\r\n        }\r\n        else\r\n            this.$.articlePanel.previous();\r\n    },\r\n    setFeed: function(feed){\r\n        this.feed = feed;\r\n        this.feedtag = null;\r\n        this.$.articleBar.setFeed(feed);\r\n    },\r\n    setFeedTag: function(tag){\r\n        this.feed = null;\r\n        this.feedtag = tag;\r\n        this.$.articleBar.setFeedTag(tag);\r\n    },\r\n    refreshArticle: function(article){\r\n        if(this.$.articlePanel.index === 1)\r\n            this.$.articlePanel.previous();\r\n        this.$.articles.refreshItem(article);\r\n    },\r\n    refreshFeedSelectedTags: function(tags){\r\n        this.$.feedTags.refreshFeedSelectedTags(tags);\r\n    },\r\n    refreshTags: function(tags){\r\n        this.$.feedTags.refreshTags(tags);\r\n    },\r\n    updateSelectedTag: function(inSender, inEvent){\r\n        socket.emit(\"update feed tags\", {feedId: this.feed._id, feedTags: inEvent.selectedItem});\r\n    },\r\n    refreshFeedTags: function(){\r\n        this.$.feedTags.refreshFeedTags();\r\n    },\r\n    refreshFeedData: function(inSender, inEvent){\r\n        setTimeout(function(){\r\n            console.log(\"main.js:refreshFeedData\");\r\n        }, 2000);\r\n    }\r\n});\r\n\r\n\r\nenyo.kind({\r\n    name: \"reader.fragment.ArticleToolbar\",\r\n    kind: \"onyx.Toolbar\",\r\n    classes: \"toolbar\",\r\n    events: {\r\n        onShowTagPanel:\"\"\r\n    },\r\n    components: [\r\n        {\r\n            name: \"backButton\",\r\n            kind: \"onyx.Button\",\r\n            content: \"<-\",\r\n            ontap: \"backPage\"\r\n        },\r\n        {\r\n            name: \"refreshButton\",\r\n            kind: \"onyx.Button\",\r\n            content: \"Refresh\",\r\n            ontap: \"refreshArticles\"\r\n        },\r\n        {\r\n            name: \"showTagsButton\",\r\n            kind: \"onyx.Button\",\r\n            content: \"Tags\",\r\n            ontap: \"showTags\"\r\n        },\r\n        {name: \"name\"},\r\n        {kind: \"Signals\", onChangeArticleSource: \"changeArticleSource\"},\r\n    ],\r\n    feed: null,\r\n    feedtag: null,\r\n    create: function(){\r\n        this.inherited(arguments);\r\n        if(!enyo.Panels.isScreenNarrow()){\r\n            this.$.backButton.hide();\r\n        }\r\n    },\r\n    refreshArticles: function(){\r\n        if(this.feed !== null){\r\n            console.log('socket.emit:refresh feed articles');\r\n            socket.emit('refresh feed articles', {feed: this.feed});\r\n        }else if(this.feedtag !== null){\r\n            console.log('socket.emit:refresh tagged articles');\r\n            socket.emit('refresh tagged articles', {tag: this.feedtag});\r\n        }\r\n    },\r\n    setFeed: function(feed){\r\n        this.feed = feed;\r\n        this.feedtag = null;\r\n    },\r\n    setFeedTag: function(tag){\r\n        this.feed = null;\r\n        this.feedtag = tag;\r\n    },\r\n    setupItem: function(inSender, inEvent){\r\n        this.$.menuitem.setContent(\"aaaa\");\r\n    },\r\n    itemSelected: function(inSender, inEvnet){\r\n        this.$.tagMenu.destroyClientControls();\r\n        this.$.tagMenu.createComponent({content: \"ccccc\"});\r\n        this.$.tagMenu.createComponent({content: \"ddddd\"});\r\n        this.render();\r\n    },\r\n    showTags: function(){\r\n        this.doShowTagPanel();\r\n    },\r\n    changeArticleSource: function(inSender, inEvent){\r\n        var name = inEvent.name;\r\n        \r\n        this.$.name.setContent(name);\r\n    }\r\n});"]],"start1":0,"start2":0,"length1":0,"length2":4385}]],"length":4385,"saved":false}
