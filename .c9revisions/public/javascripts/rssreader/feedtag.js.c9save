{"ts":1369894900208,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1369894815027,"patch":[[{"diffs":[[1,"enyo.kind({\r\n    name: \"reader.fragment.FeedTags\",\r\n    events: {\r\n        onUpdateSelectedItem: \"\",\r\n        onResetFeedTagData: \"\",\r\n    },\r\n    components: [\r\n        {\r\n            name: \"list\",\r\n            kind: \"List\",\r\n            classes: \"list-main-tags-list\",\r\n            count: 0,\r\n            onSetupItem: \"setupItem\",\r\n            multiSelect: true,\r\n            fit: true,\r\n            components: [\r\n                {name: \"tag\", kind: \"reader.fragment.FeedTag\", ontap: \"updateSelectedItem\"}\r\n            ]\r\n        }\r\n    ],\r\n    tags: [],\r\n    selectedItem: \"\",\r\n    setupItem: function(inSender, inEvent){\r\n        var i = inEvent.index;\r\n        var selected = inSender.isSelected(i);\r\n        \r\n        this.$.tag.setTag(this.tags[i]);\r\n        this.$.tag.addRemoveClass(\"selected\", selected === true);\r\n    },\r\n    refreshTags: function(tags){\r\n        this.tags = tags;\r\n        this.$.list.setCount(tags.length);\r\n        this.$.list.refresh();\r\n    },\r\n    refreshFeedSelectedTags: function(selectedTags){\r\n        for(var i=0; i<this.tags.length; i++){\r\n            this.$.list.deselect(i);\r\n        }\r\n        \r\n        for(var i=0; i<selectedTags.length; i++){\r\n            var selectedTag = selectedTags[i];\r\n            \r\n            for(var s=0; s<this.tags.length; s++){\r\n                if(this.tags[s]._id == selectedTag)\r\n                    this.$.list.select(s);\r\n            }\r\n        }\r\n        this.$.list.refresh();\r\n    },\r\n    updateSelectedItem: function(inSender, inEvent){\r\n        var updFeeds = function(feedtags){\r\n            var listSelected = feedtags.$.list.getSelection().getSelected();\r\n            if(feedtags.selectedItem !== listSelected){\r\n                feedtags.selectedItem = listSelected;\r\n                var sendData = new Array();\r\n                for(var i=0; i<feedtags.tags.length; i++){\r\n                    if(feedtags.selectedItem[i] !== undefined){\r\n                        sendData.push(feedtags.tags[i]);\r\n                    }\r\n                }\r\n                \r\n                feedtags.doUpdateSelectedItem({selectedItem: sendData});\r\n            }\r\n        };\r\n        \r\n        setTimeout(updFeeds, 2000, this);\r\n    },\r\n    refreshFeedTags: function(){\r\n        this.doResetFeedTagData();\r\n        console.log(\"feedtag.js:refreshFeedTags\");\r\n    }\r\n});\r\n\r\nenyo.kind({\r\n    name: \"reader.fragment.FeedTag\",\r\n    classes: \"enyo-border-box list-feedtags-item\",\r\n    components: [\r\n        {name: \"name\", classes: \"tagname\"}\r\n    ],\r\n    feedTag: \"\",\r\n    setTag: function(tag){\r\n        this.feedTag = tag;\r\n        this.$.name.setContent(tag.name);\r\n    },\r\n});"]],"start1":0,"start2":0,"length1":0,"length2":2645}]],"length":2645,"saved":false}
