{"ts":1369847454270,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1369847398579,"patch":[[{"diffs":[[1,"enyo.kind({\n    name: \"App\",\n    components: [\n        {\n            kind: \"Panels\",\n            name: \"mainPanel\",\n            classes: \"panels enyo-fit\",\n            arrangerKind: \"CollapsingArranger\",\n            components: [\n                {\n                    kind: \"Panels\",\n                    name: \"navPanel\",\n                    classes: \"panels enyo-fit panel-nav\",\n                    components: [\n                        {kind: \"reader.fragment.Feeds\", name: \"feeds\"}\n                    ]\n                },\n                {\n                    kind: \"Panels\",\n                    name: \"contentPanel\",\n                    classes: \"panels enyo-fit\",\n                    components: [\n                        {\n                            kind: \"FittableRows\",\n                            components: [\n                                {kind: \"reader.fragment.ArticleToolbar\", name: \"articleBar\"},\n                                {\n                                    kind: \"Panels\",\n                                    name: \"articlePanel\",\n                                    classes: \"panels article-panel\",\n                                    arrangerKind: \"CardArranger\",\n                                    fit: true,\n                                    components: [\n                                        {kind: \"Scroller\", name: \"scroller\", strategyKind: \"TouchScrollStrategy\", components: [\n                                            {kind: \"reader.fragment.Articles\", name: \"articles\"}\n                                        ]},\n                                        {kind: \"Scroller\", components:[\n                                            {content: \"aaaa\"}\n                                        ]}\n                                    ]\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n});\n\nenyo.kind({\n    name: \"reader.fragment.Feeds\",\n    components: [\n        {\n            kind: \"reader.fragment.AddFeedBox\"\n        },\n        {\n            name: \"list\",\n            kind: \"List\",\n            classes: \"list-feeds-list\",\n            count: 0,\n            onSetupItem: \"setupItem\",\n            components: [\n                {\n                    name: \"item\",\n                    classes: \"list-feeds-item\",\n                    ontap: \"itemTap\",\n                    components: [\n                        {\n                            name: \"name\"\n                        }\n                    ]\n                }\n            ]\n        }\n    ],\n    feeds: [],\n    setupItem: function(inSender, inEvent){\n        var i = inEvent.index;\n        \n        this.$.name.setContent(this.feeds[inEvent.index].name);\n        this.$.item.addRemoveClass(\"list-feeds-item-selected\", inSender.isSelected(i));\n    },\n    itemTap: function(inSender, inEvent){\n        var i = inEvent.index;\n        \n        socket.emit('load feed articles', {feed: this.feeds[i]});\n    },\n    refreshList: function(data){\n        this.feeds = data;\n        this.$.list.setCount(this.feeds.length);\n        this.$.list.refresh();\n    }\n});\n\nenyo.kind({\n    name: \"reader.fragment.Articles\",\n    components: [\n        {\n            name: \"list\",\n            kind: \"List\",\n            classes: \"list-articles-list\",\n            count: 0,\n            onSetupItem: \"setupItem\",\n            multiSelect: true,\n            fit: true,\n            components: [\n                {kind: \"reader.fragment.Article\", name: \"article\", ontap: \"itemTap\"},\n            ]\n        }\n    ],\n    articles: [],\n    setupItem: function(inSender, inEvent){\n        var i = inEvent.index;\n        \n        this.$.article.setArticle(this.articles[i]);\n        this.$.article.setSelected(inSender.isSelected(i));\n    },\n    itemTap: function(inSender, inEvent){\n    },\n    refreshItem: function(data){\n        this.articles = data;\n        this.$.list.setCount(this.articles.length);\n        this.$.list.refresh();\n    }\n});\n\nenyo.kind({\n    name: \"reader.fragment.Article\",\n    classes: \"enyo-border-box expandable list-articles-item\",\n    components: [\n        {name: \"title\", classes: \"list-article-title\"},\n        {name: \"date\", classes: \"list-article-date\"},\n        {name: \"description\", classes: \"description\", allowHtml: true}\n    ],\n    setSelected: function(inSelected){\n        this.addRemoveClass(\"expandable\", !inSelected);\n        this.addRemoveClass(\"expandable-selected\", inSelected);\n    },\n    setArticle: function(article){\n        if(Math.abs(moment(article.date).diff(moment(), \"days\")) > 0)\n            this.$.date.setContent(moment(article.date).format(\"M/D\"));\n        else\n            this.$.date.setContent(moment(article.date).format(\"HH:mm\"));\n\nthis.$.title.setContent(article.title);\n        this.$.description.setContent(article.description);\n    }\n});\n\nenyo.kind({\n    name: \"reader.fragment.AddFeedBox\",\n    kind: \"onyx.MenuDecorator\",\n    components: [\n        {content: \"Add Feed\"},\n        {\n            kind: \"onyx.ContextualPopup\",\n            title: \"Add Feed\",\n            components: [\n                {name: \"textArea\", kind: \"onyx.TextArea\"},\n                {kind: \"onyx.Button\", content: \"Add\", ontap: \"addFeed\"}\n            ]\n        }\n    ],\n    addFeed: function(inSender, inEvent){\n        this.$.contextualPopup.hide();\n        socket.emit('add feed', {url: this.$.textArea.getValue()});\n    }\n});\n\nenyo.kind({\n    name: \"reader.fragment.ArticleToolbar\",\n    kind: \"onyx.Toolbar\",\n    components: [\n        {name: \"name\"},\n        {\n            kind: \"onyx.MenuDecorator\",\n            onSelect: \"itemSelected\",\n            components: [\n                {content: \"menu\"},\n                {kind: \"onyx.Menu\", components: [\n                    {\n                        name: \"tagMenu\",\n                        kind: \"enyo.Scroller\",\n                        defaultKind: \"onyx.MenuItem\",\n                        vertical: \"auto\",\n                        strategyKind: \"TouchScrollStrategy\",\n                        components: [\n                            {content: \"aaaaa\"},\n                            {content: \"bbbbbb\"}\n                        ]\n                    }\n                ]}\n            ]\n        },\n        {\n            name: \"refreshButton\",\n            kind: \"onyx.Button\",\n            content: \"Refresh\",\n            ontap: \"refreshArticles\"\n        },\n        {\n            name: \"showTagsButton\",\n            kind: \"onyx.Button\",\n            content: \"Tags\",\n            ontap: \"showTags\"\n        }\n    ],\n    feed: null,\n    refreshArticles: function(){\n        if(this.feed !== null){\n            socket.emit('refresh feed articles', {feed: this.feed});\n        }\n    },\n    setFeed: function(feed){\n        this.feed = feed;\n    },\n    setupItem: function(inSender, inEvent){\n        this.$.menuitem.setContent(\"aaaa\");\n    },\n    itemSelected: function(inSender, inEvnet){\n        this.$.tagMenu.destroyClientControls();\n        this.$.tagMenu.createComponent({content: \"ccccc\"});\n        this.$.tagMenu.createComponent({content: \"ddddd\"});\n        this.render();\n    },\n    showTags: function(){\n        console.log(\"aaa\");\n    }\n});"]],"start1":0,"start2":0,"length1":0,"length2":7204}]],"length":7204,"saved":false}
